import{_ as s,c as a,o as i,a2 as n}from"./chunks/framework.U6HXpukZ.js";const l="/assets/1721035729171.BmuGyqzu.jpg",t="/assets/1721035729179.397EhRM-.png",p="/assets/image-mozg.C8opq9Sf.png",_=JSON.parse('{"title":"Linux重启后磁盘号错乱问题","description":"","frontmatter":{},"headers":[],"relativePath":"bug-linux-disk.md","filePath":"bug-linux-disk.md"}'),e={name:"bug-linux-disk.md"},h=n('<h1 id="linux重启后磁盘号错乱问题" tabindex="-1">Linux重启后磁盘号错乱问题 <a class="header-anchor" href="#linux重启后磁盘号错乱问题" aria-label="Permalink to &quot;Linux重启后磁盘号错乱问题&quot;">​</a></h1><h3 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h3><blockquote><p>linux拥有多块磁盘设备，重启后磁盘号更换，导致使用/dev/sda挂载的文件切换到其他磁盘号。</p></blockquote><p>重启前：</p><p><img src="'+l+'" alt="img"></p><p>重启后：</p><p><img src="'+t+`" alt="img"></p><h3 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h3><h4 id="文件系统-须分区" tabindex="-1">文件系统（须分区） <a class="header-anchor" href="#文件系统-须分区" aria-label="Permalink to &quot;文件系统（须分区）&quot;">​</a></h4><h5 id="方式一-使用uuid-推荐" tabindex="-1">方式一：使用UUID（推荐） <a class="header-anchor" href="#方式一-使用uuid-推荐" aria-label="Permalink to &quot;方式一：使用UUID（推荐）&quot;">​</a></h5><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看分区UUID</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blkid</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或者</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsblk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name,maj:min,rm,size,ro,type,mountpoint,label,uuid</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改前</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/dev/sdb1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       /data0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       defaults</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改后</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UUID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">79ba7c2e-23da-405e-95c0-6cdd215a984a</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       /data0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       defaults</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span></code></pre></div><h5 id="方式二-使用label-只能是ext2、ext3、ext4分区类型-不支持xfs分区" tabindex="-1">方式二：使用LABEL（只能是ext2、ext3、ext4分区类型，不支持xfs分区） <a class="header-anchor" href="#方式二-使用label-只能是ext2、ext3、ext4分区类型-不支持xfs分区" aria-label="Permalink to &quot;方式二：使用LABEL（只能是ext2、ext3、ext4分区类型，不支持xfs分区）&quot;">​</a></h5><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">e2label</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdb1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> labelname</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改前</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/dev/sdb1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       /data0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       defaults</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改后</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LABEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labelname</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       /data0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       ext4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       defaults</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span></code></pre></div><h4 id="块设备" tabindex="-1">块设备 <a class="header-anchor" href="#块设备" aria-label="Permalink to &quot;块设备&quot;">​</a></h4><p>块设备是没有分区的裸盘，并没有UUID，可以使用设备id</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ll /dev/disk/by-id/</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 ata-HGST_HUS726T4TALE6L4_V1J32VRG -&gt; ../../sdf</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 ata-HGST_HUS726T4TALE6L4_V1J53H2G -&gt; ../../sde</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 ata-HGST_HUS726T4TALE6L4_V1J5U38G -&gt; ../../sda</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 ata-HGST_HUS726T4TALE6L4_V1J5U9RG -&gt; ../../sdb</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 ata-HGST_HUS726T4TALE6L4_V1J5W55G -&gt; ../../sdg</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span># more</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 scsi-SATA_HGST_HUS726T4TAL_V1J32VRG -&gt; ../../sdf</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 scsi-SATA_HGST_HUS726T4TAL_V1J53H2G -&gt; ../../sde</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 scsi-SATA_HGST_HUS726T4TAL_V1J5U38G -&gt; ../../sda</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 scsi-SATA_HGST_HUS726T4TAL_V1J5U9RG -&gt; ../../sdb</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 scsi-SATA_HGST_HUS726T4TAL_V1J5W55G -&gt; ../../sdg</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 scsi-STOSHIBA_AL15SEB060N_Y0T0A2UYFM9F -&gt; ../../sdd</span></span>
<span class="line"><span>lrwxrwxrwx 1 root root  9 Jul 15 21:36 scsi-STOSHIBA_AL15SEB060N_Y0T0A30YFM9F -&gt; ../../sdc</span></span></code></pre></div><blockquote><p>重复的既有ata和scsi随便选一个就行，都是指向同一个设备文件，我这里选scsi</p></blockquote><p>示例（ceph实例 ）：</p><p><img src="`+p+'" alt="img"></p>',19),r=[h];function k(d,o,c,g,F,x){return i(),a("div",null,r)}const b=s(e,[["render",k]]);export{_ as __pageData,b as default};
